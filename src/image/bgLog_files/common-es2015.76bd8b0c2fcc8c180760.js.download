(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{"+An/":function(e,n,i){"use strict";i.d(n,"a",(function(){return c}));var s=i("fXoL"),t=i("Ac7g"),r=i("Xgv5");let c=(()=>{class e{constructor(e,n){this.http=e,this.cart=n}get(e){return this.http.get("/preferences/outlet/delivery/cost",{area_id:e,cart_uuid:this.cart.uuid})}}return e.\u0275fac=function(n){return new(n||e)(s.dc(t.q),s.dc(r.a))},e.\u0275prov=s.Pb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},StdB:function(e,n,i){"use strict";i.d(n,"a",(function(){return F}));var s=i("3Pt+"),t=i("2Vo4"),r=i("fXoL"),c=i("dEAy"),a=i("PScX"),o=i("Ac7g"),l=i("XX3X"),d=i("9MFN"),b=i("B+r4"),p=i("ocnv"),u=i("zAKX"),g=i("ofXK"),f=i("5vDB"),m=i("PTRe"),h=i("OzZK"),z=i("RwU8"),Z=i("C2AL");function S(e,n){if(1&e&&(r.Zb(0,"span"),r.Mc(1),r.Yb()),2&e){const e=r.kc().$implicit;r.Db(1),r.Oc("",e.line_1,", ")}}function Y(e,n){if(1&e&&(r.Zb(0,"span"),r.Mc(1),r.Yb()),2&e){const e=r.kc().$implicit;r.Db(1),r.Oc("",e.line_2,", ")}}function v(e,n){if(1&e&&(r.Zb(0,"span"),r.Mc(1),r.Yb()),2&e){const e=r.kc().$implicit;r.Db(1),r.Oc("",e.area.display_name,", ")}}function D(e,n){if(1&e&&(r.Zb(0,"span"),r.Mc(1),r.Yb()),2&e){const e=r.kc().$implicit;r.Db(1),r.Oc("",e.district.display_name,", ")}}function A(e,n){if(1&e&&(r.Zb(0,"span"),r.Mc(1),r.Yb()),2&e){const e=r.kc().$implicit;r.Db(1),r.Oc("",e.division.display_name,", ")}}function _(e,n){if(1&e&&(r.Zb(0,"span"),r.Mc(1),r.Yb()),2&e){const e=r.kc().$implicit;r.Db(1),r.Oc("",e.country.display_name,".")}}function M(e,n){if(1&e&&(r.Zb(0,"nz-option",28),r.Kc(1,S,2,1,"span",29),r.Kc(2,Y,2,1,"span",29),r.Ub(3,"br"),r.Kc(4,v,2,1,"span",29),r.Kc(5,D,2,1,"span",29),r.Kc(6,A,2,1,"span",29),r.Kc(7,_,2,1,"span",29),r.Yb()),2&e){const e=n.$implicit;r.sc("nzValue",e.id)("nzLabel",e.line_1+" "+e.line_2),r.Db(1),r.sc("ngIf",e.line_1),r.Db(1),r.sc("ngIf",e.line_2),r.Db(2),r.sc("ngIf",e.area),r.Db(1),r.sc("ngIf",e.district),r.Db(1),r.sc("ngIf",e.division),r.Db(1),r.sc("ngIf",e.country)}}function C(e,n){if(1&e&&(r.Zb(0,"span"),r.Mc(1),r.Yb()),2&e){const e=r.kc().$implicit;r.Db(1),r.Oc("",e.line_1,", ")}}function I(e,n){if(1&e&&(r.Zb(0,"span"),r.Mc(1),r.Yb()),2&e){const e=r.kc().$implicit;r.Db(1),r.Oc("",e.line_2,", ")}}function y(e,n){if(1&e&&(r.Zb(0,"span"),r.Mc(1),r.Yb()),2&e){const e=r.kc().$implicit;r.Db(1),r.Oc("",e.area.display_name,", ")}}function O(e,n){if(1&e&&(r.Zb(0,"span"),r.Mc(1),r.Yb()),2&e){const e=r.kc().$implicit;r.Db(1),r.Oc("",e.district.display_name,", ")}}function L(e,n){if(1&e&&(r.Zb(0,"span"),r.Mc(1),r.Yb()),2&e){const e=r.kc().$implicit;r.Db(1),r.Oc("",e.division.display_name,", ")}}function k(e,n){if(1&e&&(r.Zb(0,"span"),r.Mc(1),r.Yb()),2&e){const e=r.kc().$implicit;r.Db(1),r.Oc("",e.country.display_name,".")}}function K(e,n){if(1&e&&(r.Zb(0,"nz-option",28),r.Kc(1,C,2,1,"span",29),r.Kc(2,I,2,1,"span",29),r.Ub(3,"br"),r.Kc(4,y,2,1,"span",29),r.Kc(5,O,2,1,"span",29),r.Kc(6,L,2,1,"span",29),r.Kc(7,k,2,1,"span",29),r.Yb()),2&e){const e=n.$implicit;r.sc("nzValue",e.id)("nzLabel",e.line_1+""+e.line_2),r.Db(1),r.sc("ngIf",e.line_1),r.Db(1),r.sc("ngIf",e.line_2),r.Db(2),r.sc("ngIf",e.area),r.Db(1),r.sc("ngIf",e.district),r.Db(1),r.sc("ngIf",e.division),r.Db(1),r.sc("ngIf",e.country)}}function B(e,n){1&e&&(r.Xb(0),r.Mc(1," Please enter a valid cell phone number. "),r.Wb())}function T(e,n){1&e&&r.Kc(0,B,2,0,"ng-container",29),2&e&&r.sc("ngIf",n.$implicit.hasError("pattern"))}function X(e,n){1&e&&(r.Xb(0),r.Mc(1," Please enter addres line 1! "),r.Wb())}function $(e,n){1&e&&r.Kc(0,X,2,0,"ng-container",29),2&e&&r.sc("ngIf",n.$implicit.hasError("required"))}function w(e,n){if(1&e&&r.Ub(0,"nz-option",30),2&e){const e=n.$implicit;r.sc("nzLabel",e.display_name)("nzValue",e.id)}}function N(e,n){1&e&&(r.Xb(0),r.Mc(1," Please select a area! "),r.Wb())}function P(e,n){1&e&&r.Kc(0,N,2,0,"ng-container",29),2&e&&r.sc("ngIf",n.$implicit.hasError("required"))}let F=(()=>{class e{constructor(e,n,i,s,r,c,a){this.modal=e,this.fb=n,this.http=i,this.areaService=s,this.addressService=r,this.message=c,this.setting=a,this.i=null,this.selectedShippingAddressID=null,this.selectedBillingAddressID=null,this.loadingAddresses=!1,this.addresses=[],this.loadingOnSubmit=!1,this.isArealoding=!1,this.areas=[],this.areaLoading=!1,this.areaSearchChange$=new t.a(""),this.debounceTimeValue=750,this.phoneNumberRegex=/^01[356789][0-9]{8}\b$/}ngOnInit(){this.initForm(),this.getArea(),this.getAddresses(),this.addressService.get()}initForm(){this.addressForm=this.fb.group({title:[null],contact_person_name:[null],contact_person_phone_number:[this.setting.user.cell_phone,[s.q.required,s.q.pattern(this.phoneNumberRegex)]],line_1:[null,[s.q.required]],line_2:[null],area_id:[null,[s.q.required]],postal_code:[null]})}getAddresses(){this.loadingAddresses=!0,this.addressService.get().subscribe(e=>{this.selectedShippingAddressID=this.addressService.default?this.addressService.default.id:null,this.selectedBillingAddressID=this.addressService.defaultBilling?this.addressService.defaultBilling.id:this.selectedShippingAddressID;const n=localStorage.getItem(this.addressService.localStorageBillingSlug),i=JSON.parse(n);this.selectedBillingAddressID=i?i.id:this.addressService.defaultBilling?this.addressService.defaultBilling.id:this.selectedShippingAddressID,this.loadingAddresses=!1},e=>{this.loadingAddresses=!1})}onShippingAddressSelect(e){this.addressService.makeDefault(e).subscribe(e=>{e&&(console.log(e),this.message.success("Shipping address is successfully changed."))})}onBillingAddressSelect(e){this.addressService.makeBillingAddressDefault(e),this.message.success("Shipping address is successfully changed.")}onSubmit(e){this.loadingOnSubmit=!0,this.addressService.create(e).subscribe(e=>{this.loadingOnSubmit=!1,this.message.success("New address is successfully created."),this.addressService.get(),this.onClose()},e=>{this.loadingOnSubmit=!1})}onClose(){this.modal.close()}getArea(){this.isArealoding=!0,this.http.get("/areas/enum").subscribe(e=>{e?(this.areas=e,this.isArealoding=!1):this.areas=[],this.areaLoading=!1},e=>{this.areas=[],this.areaLoading=!1})}onSearchArea(e){this.areaSearchChange$.next(e)}}return e.\u0275fac=function(n){return new(n||e)(r.Tb(c.c),r.Tb(s.d),r.Tb(o.q),r.Tb(l.a),r.Tb(d.a),r.Tb(a.e),r.Tb(o.m))},e.\u0275cmp=r.Nb({type:e,selectors:[["app-address-box"]],inputs:{i:"i"},decls:80,vars:17,consts:[[1,"modal-header"],[1,"modal-title"],["nz-row","","nzGutter","8",1,"mt-md"],["nz-col","","nzSpan","24"],["nzRequired",""],["nzSize","large",2,"width","100%",3,"ngModel","nzLoading","ngModelChange"],["nzCustomContent","",3,"nzValue","nzLabel",4,"ngFor","ngForOf"],["nzText","or Create A New Address"],["nz-form","",3,"nzLayout","formGroup"],["nz-row","","nzGutter","8"],["nz-input","","formControlName","title","placeholder","Ex Home address, Office address","nzSize","large"],["nz-col","","nzXs","24","nzSm","12","nzMd","12","nzLg","12"],["formControlName","contact_person_name","nz-input","","placeholder","Enter name","nzSize","large"],[1,"add-cp-phone"],["nzHasFeedback","",3,"nzErrorTip"],["nzAddOnBefore","+88","nzSize","large"],["formControlName","contact_person_phone_number","nz-input","","placeholder","Ex 01XXXXXXXXX"],["errorTplCellPhone",""],["nz-input","","formControlName","line_1","placeholder","Enter address line 1","nzSize","large"],["errorTpladdresline1",""],["nz-input","","formControlName","line_2","placeholder","Enter address line 2","nzSize","large"],["nzShowSearch","","nzPlaceHolder","Search & select area","formControlName","area_id","nzSize","large",3,"nzLoading"],[3,"nzLabel","nzValue",4,"ngFor","ngForOf"],["errorTplarea",""],["nz-input","","formControlName","postal_code","placeholder","Enter zip/post code","nzSize","large"],["nz-col","","nzSpan","12"],["nz-button","","type","button","nzBlock","","nzSize","large",3,"nzType","click"],["nz-button","","type","submit","nzBlock","","nzSize","large",3,"disabled","nzType","nzLoading","click"],["nzCustomContent","",3,"nzValue","nzLabel"],[4,"ngIf"],[3,"nzLabel","nzValue"]],template:function(e,n){if(1&e&&(r.Zb(0,"div",0),r.Zb(1,"div",1),r.Mc(2,"Change or Create Shipping Address"),r.Yb(),r.Yb(),r.Zb(3,"div",2),r.Zb(4,"div",3),r.Zb(5,"nz-form-label",4),r.Mc(6,"Select Shipping Address"),r.Yb(),r.Yb(),r.Zb(7,"div",3),r.Zb(8,"nz-select",5),r.hc("ngModelChange",(function(e){return n.selectedShippingAddressID=e}))("ngModelChange",(function(e){return n.onShippingAddressSelect(e)})),r.Kc(9,M,8,8,"nz-option",6),r.Yb(),r.Yb(),r.Yb(),r.Zb(10,"div",2),r.Zb(11,"div",3),r.Zb(12,"nz-form-label",4),r.Mc(13,"Select Billing Address"),r.Yb(),r.Yb(),r.Zb(14,"div",3),r.Zb(15,"nz-select",5),r.hc("ngModelChange",(function(e){return n.selectedBillingAddressID=e}))("ngModelChange",(function(e){return n.onBillingAddressSelect(e)})),r.Kc(16,K,8,8,"nz-option",6),r.Yb(),r.Yb(),r.Yb(),r.Ub(17,"nz-divider",7),r.Zb(18,"form",8),r.Zb(19,"div",9),r.Zb(20,"div",3),r.Zb(21,"nz-form-item"),r.Zb(22,"nz-form-label"),r.Mc(23,"Address Title"),r.Yb(),r.Zb(24,"nz-form-control"),r.Ub(25,"input",10),r.Yb(),r.Yb(),r.Yb(),r.Yb(),r.Zb(26,"div",9),r.Zb(27,"div",11),r.Zb(28,"nz-form-item"),r.Zb(29,"nz-form-label"),r.Mc(30,"Contact Person Name"),r.Yb(),r.Zb(31,"nz-form-control"),r.Ub(32,"input",12),r.Yb(),r.Yb(),r.Yb(),r.Zb(33,"div",11),r.Zb(34,"nz-form-item",13),r.Zb(35,"nz-form-label",4),r.Mc(36,"Contact Person Phone Number"),r.Yb(),r.Zb(37,"nz-form-control",14),r.Zb(38,"nz-input-group",15),r.Ub(39,"input",16),r.Kc(40,T,1,1,"ng-template",null,17,r.Lc),r.Yb(),r.Yb(),r.Yb(),r.Yb(),r.Yb(),r.Zb(42,"div",9),r.Zb(43,"div",11),r.Zb(44,"nz-form-item"),r.Zb(45,"nz-form-label",4),r.Mc(46,"Address Line 1"),r.Yb(),r.Zb(47,"nz-form-control",14),r.Ub(48,"input",18),r.Kc(49,$,1,1,"ng-template",null,19,r.Lc),r.Yb(),r.Yb(),r.Yb(),r.Zb(51,"div",11),r.Zb(52,"nz-form-item"),r.Zb(53,"nz-form-label"),r.Mc(54,"Address Line 2"),r.Yb(),r.Zb(55,"nz-form-control"),r.Ub(56,"input",20),r.Yb(),r.Yb(),r.Yb(),r.Yb(),r.Zb(57,"div",9),r.Zb(58,"div",11),r.Zb(59,"nz-form-item"),r.Zb(60,"nz-form-label",4),r.Mc(61,"Area"),r.Yb(),r.Zb(62,"nz-form-control",14),r.Zb(63,"nz-select",21),r.Kc(64,w,1,2,"nz-option",22),r.Yb(),r.Kc(65,P,1,1,"ng-template",null,23,r.Lc),r.Yb(),r.Yb(),r.Yb(),r.Zb(67,"div",11),r.Zb(68,"nz-form-item"),r.Zb(69,"nz-form-label"),r.Mc(70,"ZIP/Post Code"),r.Yb(),r.Zb(71,"nz-form-control"),r.Ub(72,"input",24),r.Yb(),r.Yb(),r.Yb(),r.Yb(),r.Zb(73,"div",9),r.Zb(74,"div",25),r.Zb(75,"button",26),r.hc("click",(function(){return n.onClose()})),r.Mc(76,"Cancel"),r.Yb(),r.Yb(),r.Zb(77,"div",25),r.Zb(78,"button",27),r.hc("click",(function(){return n.onSubmit(n.addressForm.value)})),r.Mc(79," Create "),r.Yb(),r.Yb(),r.Yb(),r.Yb()),2&e){const e=r.Bc(41),i=r.Bc(50),s=r.Bc(66);r.Db(8),r.sc("ngModel",n.selectedShippingAddressID)("nzLoading",n.loadingAddresses),r.Db(1),r.sc("ngForOf",n.addressService.addresses),r.Db(6),r.sc("ngModel",n.selectedBillingAddressID)("nzLoading",n.loadingAddresses),r.Db(1),r.sc("ngForOf",n.addressService.addresses),r.Db(2),r.sc("nzLayout","vertical")("formGroup",n.addressForm),r.Db(19),r.sc("nzErrorTip",e),r.Db(10),r.sc("nzErrorTip",i),r.Db(15),r.sc("nzErrorTip",s),r.Db(1),r.sc("nzLoading",n.isArealoding),r.Db(1),r.sc("ngForOf",n.areas),r.Db(11),r.sc("nzType","default"),r.Db(3),r.sc("disabled",!n.addressForm.valid)("nzType","primary")("nzLoading",n.loadingOnSubmit)}},directives:[b.c,b.a,p.d,u.d,s.k,s.n,g.m,f.a,s.r,s.l,p.b,s.g,p.c,p.a,m.b,s.c,s.f,m.c,h.a,z.a,Z.a,u.a,g.n],styles:["[_nghost-%COMP%]   .modal-header[_ngcontent-%COMP%]{margin-bottom:0!important}"]}),e})()}}]);